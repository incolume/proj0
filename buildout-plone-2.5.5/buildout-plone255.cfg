[buildout]

extends =
    base-plone255.cfg

parts +=
    client1
    client2
    zeoserver
    supervisor 

eggs +=
    PyPDF

zeo-address = 0.0.0.0:8000 
supervisor-address = 8080
effective-user = plone

############################################
# Debug Mode
# ----------
# Change debug-mode to "on" to run in development mode.
#

############################################
# Backup Directory
# ----------------
# Sets the target directory for the bin/backup and bin/snapshotbackup
# commands. Default is inside this project's var directory, but ideally
# this should be on a separate volume or backup server.
#
backups-dir=${buildout:directory}/var

# Don't download new things unless needed to satisfy dependencies.
# Override this on the command line with the "-n" flag.
newest = false

[zeoserver]
recipe = plone.recipe.zope2zeoserver
zope2-location = ${zope2:location}
effective-user = ${buildout:effective-user}
eggs = tempstorage
socket-name = ${buildout:directory}/var/zeoserver/zeo.zdsock
zeo-log     = ${buildout:directory}/var/zeoserver/zeoserver.log
pid-file    = ${buildout:directory}/var/zeoserver/zeoserver.pid
zeo-address = ${buildout:zeo-address}
zeo-conf-additional =
    <filestorage plone255>
    path ${buildout:directory}/var/filestorage/siteDB.fs
    </filestorage>

[client1]
<= instance
zeo-client = on
zeo-address = ${buildout:zeo-address}
debug-mode = off
deprecation-warnings = off
# Add-on developers should turn deprecation warnings on
# change verbose-security to "on" for useful security errors while developing
verbose-security = off
port-base = 1
event-log = ${buildout:directory}/var/client1/event.log
z2-log    = ${buildout:directory}/var/client1/Z2.log
pid-file  = ${buildout:directory}/var/client1/client1.pid
lock-file = ${buildout:directory}/var/client1/client1.lock

  
[client2]
<= instance
zeo-client = on
zeo-address = ${buildout:zeo-address}
debug-mode = off
deprecation-warnings = off
# Add-on developers should turn deprecation warnings on
# change verbose-security to "on" for useful security errors while developing
verbose-security = off
port-base = 2
event-log = ${buildout:directory}/var/client2/event.log
z2-log    = ${buildout:directory}/var/client2/Z2.log
pid-file  = ${buildout:directory}/var/client2/client2.pid
lock-file = ${buildout:directory}/var/client2/client2.lock


[supervisor]
recipe = collective.recipe.supervisor
plugins =
      superlance
port = ${buildout:supervisor-address}
user = usrsupervisor
password = 123456
serverurl = http://supervisor.mustap.com
programs =
      10 zeoserver ${zeoserver:location}/bin/runzeo ${zeoserver:location}
      20 client1 ${client1:location}/bin/runzope ${client1:location} true
      20 client2 ${client2:location}/bin/runzope ${client2:location} true
      30 instance (autostart=false) ${instance:location}/bin/runzope true
eventlisteners =
      Memmon TICK_60 ${buildout:bin-directory}/memmon [-p client1=200MB]
      HttpOk (startsecs=20) TICK_60 ${buildout:bin-directory}/httpok [-p site1 -t 20 http://localhost:8080/]
groups =
      10 services zeoserver,client1

[versions]
superlance = 0.6
supervisor = 3.0b1
meld3 = 0.6.9
zc.recipe.egg = 1.2.2
ZopeUndo = 2.12.0
plone.recipe.zeoserver = 1.0a1
