3,6c3,10
< extends +=
<     buildout-plone255.cfg
< 
< parts +=
---
> parts =
>     productdistros
>     lxml
>     plone
>     zope2
>     instance
>     zopepy
>     cmds
8,55d11
<     client1
<     client2
<     zeoserver
<     supervisor 
< 
< http-address = 8001
< zeo-address = 8000 
< effective-user = admin
< 
< ############################################
< # Debug Mode
< # ----------
< # Change debug-mode to "on" to run in development mode.
< #
< debug-mode = off
< # Add-on developers should turn deprecation warnings on
< deprecation-warnings = off
< # change verbose-security to "on" for useful security errors while developing
< verbose-security = off
< 
< ############################################
< # Backup Directory
< # ----------------
< # Sets the target directory for the bin/backup and bin/snapshotbackup
< # commands. Default is inside this project's var directory, but ideally
< # this should be on a separate volume or backup server.
< #
< backups-dir=${buildout:directory}/var
< 
< # Don't download new things unless needed to satisfy dependencies.
< # Override this on the command line with the "-n" flag.
< newest = false
< 
< [zeoserver]
< # Use this section to install and configure a Zope
< # Enterprise Objects server.
< # For options see http://pypi.python.org/pypi/plone.recipe.zeoserver
< recipe = plone.recipe.zeoserver
< zeo-address = ${buildout:zeo-address}
< # if we try to start as root, Zope will switch to the user below
< effective-user = ${buildout:effective-user}
< # Put the log, pid and socket files in var/zeoserver
< zeo-log     = ${buildout:directory}/var/zeoserver/zeoserver.log
< pid-file    = ${buildout:directory}/var/zeoserver/zeoserver.pid
< socket-name = ${buildout:directory}/var/zeoserver/zeo.zdsock
< # You may also control the environment variables for the zeoserver.
< #environment-vars = ${buildout:environment-vars}
< eggs = tempstorage
56a13,47
> versions = versions
> 
> 
> # Add additional egg download sources here. dist.plone.org contains archives
> # of Plone packages.
> find-links =
>     http://dist.plone.org
>     http://dist.plone.org/thirdparty
> 
> # Add additional eggs here
> # elementtree is required by Plone
> eggs =
>     elementtree
>     PIL == 1.1.7
>     reportlab == 2.4
>     lxml == 2.1.2
>     
> 
> # Reference any eggs you are developing here, one per line
> # e.g.: develop = src/my.package
> develop =
> 
> 
> [lxml]
> recipe=plone.recipe.lxml
> egg = lxml == 2.1.2
> 
> [productdistros]
> # For more information on this step and configuration options see:
> # http://pypi.python.org/pypi/plone.recipe.distros
> recipe = plone.recipe.distros
> urls = 
>     http://package-environment.googlecode.com/git/plone-env/Five-1.4.4.tgz
> nested-packages =
> version-suffix-packages =
58,95d48
< [client1]
< recipe = plone.recipe.zope2instance
< user = admin:admin
< zope2-location = ${zope2:location}
< port-base = 1
< event-log = ${buildout:directory}/var/client1/event.log
< z2-log    = ${buildout:directory}/var/client1/Z2.log
< pid-file  = ${buildout:directory}/var/client1/client2.pid
< lock-file = ${buildout:directory}/var/client1/client2.lock
< 
<   
< [client2]
< <= client1
< port-base = 1
< event-log = ${buildout:directory}/var/client2/event.log
< z2-log    = ${buildout:directory}/var/client2/Z2.log
< pid-file  = ${buildout:directory}/var/client2/client2.pid
< lock-file = ${buildout:directory}/var/client2/client2.lock
< 
< [supervisor]
< recipe = collective.recipe.supervisor
< plugins =
<       superlance
< port = 9001
< user = usrsupervisor
< password = 123456
< serverurl = http://supervisor.mustap.com
< programs =
<       10 zeo ${zeo:location}/bin/runzeo ${zeo:location}
<       20 client1 ${client1:location}/bin/runzope ${client1:location} true
<       20 client2 ${client2:location}/bin/runzope ${client2:location} true
<       30 instance (autostart=false) ${instance:location}/bin/runzope true
< eventlisteners =
<       Memmon TICK_60 ${buildout:bin-directory}/memmon [-p client1=200MB]
<       HttpOk (startsecs=20) TICK_60 ${buildout:bin-directory}/httpok [-p site1 -t 20 http://localhost:8080/]
< groups =
<       10 services zeo,client1
<       20 others other,other2,other3
98,99d50
< # This recipe is used to set permissions for root mode installs
< # For options see http://pypi.python.org/pypi/plone.recipe.command
102,105c53,54
< #    mv ${zope2:location}/lib/python/Products/Five ${zope2:location}/lib/python/Products/Five-`date +%s`
< #    ln -s ${productdistros:location}/Five ${zope2:location}/lib/python/Products/
<     cp ${productdistros:location}/Five/skel/site.zcml ${instance:location}/etc
< update-command = ${cmds:command}
---
>     ln -fv ${productdistros:location}/Five/skel/site.zcml ${instance:location}/etc
> update-command = ${five:command}
108,112c57,130
< plone.recipe.zope2zeoserver = 1.4
< superlance = 0.6
< supervisor = 3.0b1
< meld3 = 0.6.9
< zc.recipe.egg = 1.3.2
---
> # Version pins for new style products go here
> plone.recipe.zope2instance = 3.6
> zc.buildout = 1.4.4
> 
> 
> [plone]
> # For more information on this step and configuration options see:
> # http://pypi.python.org/pypi/plone.recipe.distros
> recipe = plone.recipe.distros
> urls = http://launchpad.net/plone/2.5/2.5.5/+download/Plone-2.5.5.tar.gz
> nested-packages = Plone-2.5.5.tar.gz
> version-suffix-packages = Plone-2.5.5.tar.gz
> 
> [zope2]
> # For more information on this step and configuration options see:
> # http://pypi.python.org/pypi/plone.recipe.zope2install
> recipe = plone.recipe.zope2install
> fake-zope-eggs = true
> url = http://www.zope.org/Products/Zope/2.9.12/Zope-2.9.12-final.tgz
> 
> 
> [instance]
> # For more information on this step and configuration options see:
> # http://pypi.python.org/pypi/plone.recipe.zope2instance
> recipe = plone.recipe.zope2instance
> zope2-location = ${zope2:location}
> user = admin:admin
> http-address = 8000
> zeo-client = off
> #debug-mode = on
> #verbose-security = on
> # If you want Zope to know about any additional eggs, list them here.
> # This should include any development eggs you listed in develop-eggs above,
> # e.g. eggs = Plone my.package
> eggs =
>     ${buildout:eggs}
> 
> # If you want to register ZCML slugs for any packages, list them here.
> # e.g. zcml = my.package my.other.package
> zcml =
> effective-user = plone
> products =
>     ${buildout:directory}/products
> #    ${productdistros:location}
>     ${plone:location}
> 
> zope-conf-additional =
>     <zodb_db dirti_cgtiBD>
>         cache-size 40000
>         <filestorage>
>           path ${buildout:directory}/var/filestorage/dirti_cgtiBD.fs
>         </filestorage>        
>         mount-point /dirti-cgti
>     </zodb_db>
> 
> [zopepy]
> # For more information on this step and configuration options see:
> # http://pypi.python.org/pypi/zc.recipe.egg
> recipe = zc.recipe.egg
> eggs = ${instance:eggs}
> interpreter = zopepy
> extra-paths = ${zope2:location}/lib/python
> scripts = zopepy
> 
> [cmds]
> recipe = plone.recipe.command
> command =
>     chmod 600 .installed.cfg
>     find ${buildout:directory}/var -type d -exec chmod 700 {} \;
>     chmod 744 ${buildout:directory}/bin/*
>     chmod 755 ${buildout:directory}/bin/python
>     mkdir -pm 755 ${buildout:directory}/{products,src}
>     chown -R ${instance:effective-user} ${buildout:directory}/var
> update-command = ${cmds:command}
